/*!
 * Copyright 2014 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(a){"use strict";var b={modulesFileSrc:""},c={};c.scripts=function(){return document.getElementsByTagName("script")},c.filenameFromPath=function(a){return a.substring(a.lastIndexOf("/")+1)},c.loadModulesFile=function(){for(var a=c.scripts(),d=a.length-1;d>0;d--){var e=c.filenameFromPath(a[d].src),f=a[d].getAttribute("data-modules");("loader.js"==e||"loader.min.js"==e)&&(f?b.modulesFileSrc=f:console.warn('No modules file specified for the plugin loader script. Using the default \'modules.json\' Example: <script src="loader.js" data-modules="modules.json"></script>'))}},c.loadModules=function(a,b){$.each(a,function(a,d){var e,f;if("string"!=typeof d){if(e=d.component,f=d.file?$.isArray(d.file)?d.file:[d.file]:[e+".js"],!c.isBrowser(d.browser))return}else e=d,f=[d+".js"];$.each(f,function(a,d){c.getScript((b?b+"/":"")+(e?e+"/":"")+d)})})},c.isBrowser=function(a){if(!a)return!0;switch(a){case"IE":if(!IE.isTheBrowser)return!1;break;case"IE <= 8":if(!IE.isTheBrowser)return!1;switch(IE.actualVersion){case"9":case"10":return!1}}return!0},c.loadScripts=function(a){$.each(a,function(a,b){c.getScript(b)})},c.getScript=function(a){$("head").append('<script src="'+a+'" />')},c.load=function(a){a=a||{},$.ajax({url:a.modulesFileSrc,dataType:"json"}).done(function(a){var b=a.includes,d=a.application;$.each(b,function(a,b){$.isArray(b)?c.loadScripts(b):c.loadModules(b.items,b.prefix)}),$("head").append("<script>angular.bootstrap(document.getElementById('container'), ['"+d+"']);</script>")}).fail(function(a,b,c){c.message="[Loader error ("+b+")]: "+c.message,console.warn(c.message)})},c.loadModulesFile(),c.load(b),a.hippoLoader=c}(window);